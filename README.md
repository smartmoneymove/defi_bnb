# DeFi Liquidity Manager –¥–ª—è BNB Chain

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é –¥–ª—è PancakeSwap V3 –Ω–∞ BNB Smart Chain. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏ –≤ –ø—É–ª–µ USDT/BTCB —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å PancakeSwap Farm –∏ Telegram —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º.

## üåü –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **ü§ñ Telegram —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ start/stop/rebalance/reset
- **‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3 –ø–æ–∑–∏—Ü–∏—è–º–∏** —Å —É–∑–∫–∏–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º (–ø–æ 4 —Ç–∏–∫–∞ –∫–∞–∂–¥–∞—è)
- **üîÑ –£–º–Ω—ã–π —Ä–µ–±–∞–ª–∞–Ω—Å–∏–Ω–≥** –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã –Ω–∞ 0.1%
- **üç∞ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CAKE —Ç–æ–∫–µ–Ω–∞–º–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–≤–∞–ø CAKE –≤ USDT
- **üöú PancakeSwap Farms** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
- **üìä –ü–æ–ª–Ω–æ–µ P&L –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** —Å —Ä–∞—Å—á–µ—Ç–æ–º APY –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å
- **üõ°Ô∏è –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã** –æ—Ç slippage –∏ MEV –∞—Ç–∞–∫
- **üíπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–∞–ø—ã** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ Permit2
- **üî• –ú–∞—Å—Å–æ–≤–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π** —á–µ—Ä–µ–∑ multicall –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
- **üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
- **3 —Å–ª–æ—Ç–∞ –ø–æ–∑–∏—Ü–∏–π** —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –ø–æ 4 —Ç–∏–∫–∞ (0.04% –∫–∞–∂–¥—ã–π)
- **–û–±—â–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω:** 0.12% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
- **–ü–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤—Å—Ç—ã–∫** –±–µ–∑ –≥—ç–ø–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ —Ü–µ–Ω—ã –∑–∞ –ø—Ä–µ–¥–µ–ª—ã

### –õ–æ–≥–∏–∫–∞ —Ä–µ–±–∞–ª–∞–Ω—Å–∏–Ω–≥–∞
```
–¶–µ–Ω–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ > 0.1% ‚Üí –ß–∞—Å—Ç–∏—á–Ω—ã–π —Ä–µ–±–∞–ª–∞–Ω—Å (1-2 –ø–æ–∑–∏—Ü–∏–∏)
–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ > 0.19% ‚Üí –ü–æ–ª–Ω—ã–π —Ä–µ–±–∞–ª–∞–Ω—Å (–≤—Å–µ 3 –ø–æ–∑–∏—Ü–∏–∏)
```

### Telegram —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- `/start` - –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `/stop` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è)
- `/rebalance` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª–Ω—ã–π —Ä–µ–±–∞–ª–∞–Ω—Å –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- `/reset` - –ü–æ–ª–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –∏ —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `/status` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
- `/help` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
cp .env.example .env
nano .env
```

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `RPC_URL` - URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ BNB Chain (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Alchemy)
- `WALLET_ADDRESS` - –ê–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
- `PRIVATE_KEY` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–±–µ–∑ 0x –ø—Ä–µ—Ñ–∏–∫—Å–∞)
- `TELEGRAM_BOT_TOKEN` - –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞
- `TELEGRAM_CHAT_ID` - ID –≤–∞—à–µ–≥–æ Telegram —á–∞—Ç–∞

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `service_account.json.example` –≤ `service_account.json`
2. –°–æ–∑–¥–∞–π—Ç–µ Service Account –≤ Google Cloud Console
3. –í–∫–ª—é—á–∏—Ç–µ Google Sheets API
4. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –∫ —Ç–∞–±–ª–∏—Ü–µ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [GOOGLE_SHEETS_SETUP.md](GOOGLE_SHEETS_SETUP.md)

### 4. –ó–∞–ø—É—Å–∫
```bash
# –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é
python src/main.py

# –ú–∞—Å—Å–æ–≤–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
python src/close_all.py

# –û—Ç–ø—Ä–∞–≤–∫–∞ NFT –≤ CAKE —Ñ–∞—Ä–º–∏–Ω–≥
python src/cake_farm.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Google Sheets Logger
python src/google_sheets_logger.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
defi_bnb/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ liquidity_manager.py    # –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é
‚îÇ   ‚îú‚îÄ‚îÄ close_all.py           # –ú–∞—Å—Å–æ–≤–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ close_all_new.py       # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –∑–∞–∫—Ä—ã—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ telegram_controller.py  # Telegram –±–æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ data_collector.py       # –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–µ –∏ –ø–æ—Ä—Ç—Ñ–µ–ª–µ
‚îÇ   ‚îú‚îÄ‚îÄ schedule_manager.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ cake_farm.py           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PancakeSwap Farm
‚îÇ   ‚îú‚îÄ‚îÄ google_sheets_logger.py # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Google Sheets
‚îÇ   ‚îú‚îÄ‚îÄ abi/                   # ABI –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PancakeswapV3Pool.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NonfungiblePositionManager.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MasterChefV3.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CakeFarm.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PANCAKESWAP_PERMIT2_ADDRESS.json
‚îÇ   ‚îú‚îÄ‚îÄ schedule.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ liquidity_manager_state.json  # –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ data_collector_state.json     # –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–±–æ—Ä—â–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ .env                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ .env.example               # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ service_account.json       # Google Service Account (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ service_account.json.example # –ü—Ä–∏–º–µ—Ä Service Account
‚îú‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ GOOGLE_SHEETS_SETUP.md    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets
‚îú‚îÄ‚îÄ QUICK_SETUP.md            # –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îú‚îÄ‚îÄ SCHEDULE_README.md        # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îî‚îÄ‚îÄ README.md
```

## üí∞ –¢–æ–∫–µ–Ω—ã –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (BNB Chain)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- **USDT:** `0x55d398326f99059fF775485246999027B3197955`
- **BTCB:** `0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c`
- **CAKE:** `0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82`

### PancakeSwap V3 –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- **Pool USDT/BTCB:** `0x247f51881d1E3aE0f759AFB801413a6C948Ef442`
- **NonfungiblePositionManager:** `0x46A15B0b27311cedF172AB29E4f4766fbE7F4364`
- **Universal Router:** `0x13f4EA83D0bd40E75C8222255bc855a974568Dd4`
- **SwapRouter:** `0xd9C500DfF816a1Da21A48A732d3498Bf09dc9AEB`
- **Quoter:** `0xB048Bbc1Ee6b733FFfCFb9e9CeF7375518e25997`
- **Factory:** `0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865`
- **Permit2:** `0x31c2F6fcFf4F8759b3Bd5Bf0e1084A055615c768`

### Farming
- **MasterChef V3:** `0x556B9306565093C855AEA9AE92A594704c2Cd59e`

## üìä P&L –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

- **üìà –ß–∏—Å—Ç—ã–π P&L** –≤ USDT –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
- **üìä –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** –∏ –≥–æ–¥–æ–≤–∞—è APY
- **‚è∞ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏** (Impermanent Loss)
- **üíµ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏** –æ—Ç —Ç—Ä–µ–π–¥–µ—Ä–æ–≤
- **üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å HODL** —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Google Sheets
- –û—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏—Å—Ç–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –ó–∞–ø–∏—Å—å –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—á–∏—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã BTC –∏ –±–∞–ª–∞–Ω—Å–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è

## ‚öôÔ∏è –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. LiquidityManager (`src/liquidity_manager.py`)
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é:
- `decide_and_manage_liquidity()` - –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
- `analyze_rebalance_with_price()` - –ê–Ω–∞–ª–∏–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–±–∞–ª–∞–Ω—Å–∞
- `_perform_full_rebalance()` - –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- `_perform_partial_rebalance()` - –ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ 1-2 –ø–æ–∑–∏—Ü–∏–π
- `_execute_add_liquidity_fast()` - –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Å —Å–≤–∞–ø–∞–º–∏
- `_check_and_approve_token_for_permit2()` - –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π approve —á–µ—Ä–µ–∑ Permit2

### 2. PositionCloser (`src/close_all.py`)
–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è:
- `close_all_positions_multicall()` - –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π
- `swap_cake_to_usdt()` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–≤–∞–ø CAKE —Ç–æ–∫–µ–Ω–æ–≤
- `rebalance_portfolio_1_to_1()` - –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è 50/50
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∑–∏—Ü–∏–π –∫–∞–∫ –Ω–∞ –∫–æ—à–µ–ª—å–∫–µ, —Ç–∞–∫ –∏ –≤ —Ñ–∞—Ä–º–∏–Ω–≥–µ

### 3. TelegramController (`src/telegram_controller.py`)
Telegram –±–æ—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É Chat ID
- –ö–æ–º–∞–Ω–¥—ã —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–±–∞–ª–∞–Ω—Å –∏ –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã

### 4. ScheduleManager (`src/schedule_manager.py`)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `schedule.json`

### 5. CakeFarm (`src/cake_farm.py`)
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PancakeSwap Farm:
- –û—Ç–ø—Ä–∞–≤–∫–∞ NFT –ø–æ–∑–∏—Ü–∏–π –≤ —Ñ–∞—Ä–º–∏–Ω–≥
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö CAKE rewards
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `safeTransferFrom`

## üõ°Ô∏è –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

- **üéØ Slippage –∫–æ–Ω—Ç—Ä–æ–ª—å:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ 0.5% –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
- **‚õΩ Gas –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ú–∏–Ω–∏–º—É–º 0.1 Gwei –¥–ª—è BNB Chain
- **üîÑ Multicall –±–∞—Ç—á–∏–Ω–≥:** –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
- **üîê Permit2:** –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ approvals –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
- **üè¶ Balance –ø—Ä–æ–≤–µ—Ä–∫–∏:** –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤
- **‚úÖ PoA Middleware:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å BNB Chain –∫–æ–Ω—Å–µ–Ω—Å—É—Å–æ–º
- **‚è±Ô∏è Timeout —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è approve/swap, 20 —Å–µ–∫—É–Ω–¥ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –£–º–Ω—ã–π —Ä–µ–±–∞–ª–∞–Ω—Å–∏–Ω–≥
```python
strategy_params = {
    'num_positions': 3,                                    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π
    'individual_position_width_pct': Decimal('0.0004'),   # 0.04% –Ω–∞ –ø–æ–∑–∏—Ü–∏—é
    'total_range_width_pct': Decimal('0.0012'),           # 0.12% –æ–±—â–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω
    'rebalance_threshold_pct': Decimal('0.001'),          # 0.1% –ø–æ—Ä–æ–≥ —Ä–µ–±–∞–ª–∞–Ω—Å–∞
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–∞–ø—ã —á–µ—Ä–µ–∑ Permit2
- **–î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π approve:**
  1. `ERC20.approve(Permit2, infinite)` - —Ä–∞–∑–æ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
  2. `Permit2.approve(Router, amount, expiration)` - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–≤–∞–ø–∞
- **CAKE ‚Üí USDT:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–≤–∞–ø –Ω–∞–≥—Ä–∞–¥ –ø–µ—Ä–µ–¥ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π
- **Portfolio balancing:** –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è USDT/BTCB
- **Universal Router:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ PancakeSwap

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω—ã BTCB
- –ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –≤–Ω–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- UTC –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞
- –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [SCHEDULE_README.md](SCHEDULE_README.md)

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ BNB Chain
curl -X POST $RPC_URL -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
python -c "from web3 import Web3; w3 = Web3(Web3.HTTPProvider('$RPC_URL')); print(w3.eth.get_balance('$WALLET_ADDRESS'))"

# –û—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
rm src/liquidity_manager_state.json src/data_collector_state.json
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

**1. Transaction underpriced**
```
–†–µ—à–µ–Ω–∏–µ: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∏–Ω–∏–º—É–º 0.1 Gwei priority fee –¥–ª—è BNB Chain
```

**2. PoA extraData error**
```
–†–µ—à–µ–Ω–∏–µ: –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ geth_poa_middleware
```

**3. Amount Slippage (AS) error**
```
–†–µ—à–µ–Ω–∏–µ: –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã ($0.01 USDT / 0.0000001 BTCB)
```

**4. Mint failed with amount0Desired = 0**
```
–†–µ—à–µ–Ω–∏–µ: –°–∫—Ä–∏–ø—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–∏–Ω–∏–º—É–º 1 wei –¥–ª—è –æ–±–æ–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ BNB Chain mainnet
2. **‚ö†Ô∏è –†–∏—Å–∫–∏:** DeFi –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –Ω–µ—Å—É—Ç —Ä–∏—Å–∫–∏ –∏–º–ø–µ—Ä–º–æ–Ω–µ–Ω—Ç–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å –∏ smart contract –±–∞–≥–æ–≤
3. **üëÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Telegram
4. **üí∏ –ì–∞–∑:** BNB Chain –∏–º–µ–µ—Ç –Ω–∏–∑–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏ (~0.001 BNB –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é)
5. **üîÑ Multicall:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `close_all.py` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≥–∞–∑–∞ –ø—Ä–∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
6. **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ `.env` –∏ `service_account.json` —Ñ–∞–π–ª—ã

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### BNB Chain –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **Chain ID:** 56 (Mainnet)
- **Consensus:** Proof of Authority (PoA)
- **Block time:** ~3 —Å–µ–∫—É–Ω–¥—ã
- **Min gas price:** 3 Gwei (0.1 Gwei priority fee –º–∏–Ω–∏–º—É–º)
- **Native token:** BNB

### Token decimals
- **USDT:** 18 decimals
- **BTCB:** 18 decimals
- **CAKE:** 18 decimals

### Transaction timeouts
- **Approve/Swap:** 60 —Å–µ–∫—É–Ω–¥
- **Other operations:** 20 —Å–µ–∫—É–Ω–¥

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ BNB Chain RPC
2. ‚õΩ –ë–∞–ª–∞–Ω—Å BNB –¥–ª—è gas fees (~0.01 BNB –º–∏–Ω–∏–º—É–º)
3. üí∞ –ë–∞–ª–∞–Ω—Å USDT/BTCB —Ç–æ–∫–µ–Ω–æ–≤
4. üîó –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∞–¥—Ä–µ—Å–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
5. ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫—É Telegram –±–æ—Ç–∞
6. üìÖ –ù–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [QUICK_SETUP.md](QUICK_SETUP.md) - –ü–æ—à–∞–≥–æ–≤–∞—è –±—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [GOOGLE_SHEETS_SETUP.md](GOOGLE_SHEETS_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Google Sheets
- [SCHEDULE_README.md](SCHEDULE_README.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.

---

**‚ö†Ô∏è DISCLAIMER:** –î–∞–Ω–Ω–æ–µ –ü–û –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö DeFi –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫!
